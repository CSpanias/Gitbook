---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Nmap

## Commands

### Common flow

{% tabs %}
{% tab title="nmap-flow" %}
{% code overflow="wrap" %}
```bash
nmap-flow 10.10.11.231
Creating directory...
Performing initial scan...
Extracting ports...
Performing an aggresive scan on open ports...
All done! See results: less scans/aggressive_scan.nmap
```
{% endcode %}
{% endtab %}

{% tab title="Script" %}
{% code title="nmap-flow.sh" overflow="wrap" %}
```bash
IP="${1}"

if [[ -n "${IP}" ]]; then
  # create a directory for scan results
  echo "Creating directory..."
  sudo mkdir scans && sudo chmod +777 scans
  # initial scan
  echo "Performing initial scan..."
  sudo nmap -T4 -open -p- --min-rate=10000 -oA scans/initial_port-scan "${IP}" 1>/dev/null
  # extract ports in a single comma-seperated line
  echo "Extracting ports..."
  sudo grep -E '^[0-9]+/tcp' scans/initial_port-scan.nmap | grep -oE '[0-9]+' | tr "\n" "," > scans/open_ports
  # perform an aggresive scan on open ports
  echo "Performing an aggresive scan on open ports..."
  nmap -T4 --min-rate=10000 -A -p "$(cat scans/open_ports)" -oA scans/aggressive_scan "${IP}" 1>/dev/null
  echo "All done! See results: less scans/aggressive_scan.nmap"
else
  # print error message
  echo "Missing IP address!"
  echo "Usage: nmap-flow <IP-ADDRESS>"
  # exit script
  exit 1
fi
```
{% endcode %}
{% endtab %}
{% endtabs %}
