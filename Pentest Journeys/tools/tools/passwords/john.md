---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# John

## Common Formats

| Type             | Mode        |
| ---------------- | ----------- |
| `$krb5asrep$23$` | `krb5asrep` |
| `$krb5tgs$23$`   | `krb5tgs`   |
| `NTLMv2`         | `netntlmv2` |
| `NTLM`           | `netntlm`   |

## Usage

{% tabs %}
{% tab title="Usage" %}
{% code overflow="wrap" %}
```bash
john --format=<FORMAT> --wordlist=/usr/share/wordlists/rockyou.txt --fork=4 hash
```
{% endcode %}
{% endtab %}

{% tab title="Formats" %}
```bash
john --list=formats | grep <FORMAT>
```
{% endtab %}

{% tab title="Show" %}
```bash
john --show passwd.txt
```
{% endtab %}
{% endtabs %}

## Files

### zip

```bash
# convert zip file
zip2john <file.zip> > zip.hash
# crack password
john --wordlist=rockyou.txt zip.hash
# show
john zip.hash --show
# unzip the file
unzip <file.zip>
```

### pfx

```bash
# converting file to a format suitable for john
pfx2john legacyy_dev_auth.pfx > pfx_hash
# cracking the hash
john pfx_hash --wordlist=/usr/share/wordlists/rockyou
```

The extraction and decryption process from a `.pfx` file can be found [here](https://www.ibm.com/docs/en/arl/9.7?topic=certification-extracting-certificate-keys-from-pfx-file). The PEM pass phrase is set by us and later used to decrypt the key. It can be anything as long as it is > than 3 characters.

{% code overflow="wrap" %}
```bash
# extracting the key and setting a PEM pass phrase
openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out legacyy_dev_auth.key-enc
Enter Import Password:
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
# decrypting the key using the PEM pass phrase we set above
openssl rsa -in legacyy_dev_auth.key-enc -out legacyy_dev_auth.key
Enter pass phrase for legacyy_dev_auth.key-enc:
writing RSA key
# extracting the certificate
openssl pkcs12 -in legacyy_dev_auth.pfx -clcerts -nokeys -out legacyy_dev_auth.crt
Enter Import Password:
# checking the everything is there
ls legacyy_dev_auth.*
legacyy_dev_auth.crt  legacyy_dev_auth.key  legacyy_dev_auth.key-enc  legacyy_dev_auth.pfx
```
{% endcode %}

The `.crt` and `.key` files can be used to access a Windows host via WinRM.

```bash
evil-winrm -i 10.10.11.152 -S -k legacyy_dev_auth.key -c legacyy_dev_auth.crt
```

## Resources

{% tabs %}
{% tab title="GitHub" %}
{% embed url="https://github.com/openwall/john" %}
{% endtab %}

{% tab title="GUI" %}
{% embed url="https://openwall.info/wiki/john/johnny" %}
{% endtab %}
{% endtabs %}
